id,trigger,conditions,script,text,options,notes
"#RULESET_NAME niko_MPC",,,,,,
,,,,,,
# Satellite Interactions,,,,,,
niko_MPC_marketSatellitesNoBlock,OpenInteractionDialog,"niko_MPC_entityHasSatellites
!niko_MPC_satellitesWantToBlockPlayer score:1090","FireBest OpenInteractionDialog","The satellites in orbit of $entityName give your $shipOrFleet no trouble as you approach, though sensors do give a few worrying reports of brief lock-ons and targetting laser scans.",,
niko_MPC_marketSatellitesWantToBlockButCant,OpenInteractionDialog,"niko_MPC_entityHasSatellites
niko_MPC_satellitesWantToBlockPlayer 
!niko_MPC_satellitesCapableOfBlockingPlayer score:1250","FireBest OpenInteractionDialog","While the satellites in orbit of $entityName harass you, they simply are not strong enough to prevent your approach.",,"wont call noblock since wanttoblockplayer is true not false"
niko_MPC_marketSatellitesWillingAndCapableToBlock,OpenInteractionDialog,"niko_MPC_entityHasSatellites
niko_MPC_satellitesCapableAndWillingToBlock score:1300","FireBest niko_MPC_satellitesBlockingAccess",,,
niko_MPC_satellitesBypasessed,OpenInteractionDialog,"niko_MPC_entityHasSatellites
$niko_MPC_bypassedSatellites score: 2500","FireBest OpenInteractionDialog",,,"no text or anything"
,,,,,,
# Satellites Blocking Access,,,,,,
niko_MPC_genericSatelliteBlock,niko_MPC_satellitesBlockingAccess,,"FireAll niko_MPC_satellitesBlocking_PopulateOptions
FireBest niko_MPC_satellitesBlockingText",,,
,,,,,,
# Populating Options,,,,,,
niko_MPC_attackSatellitesOption,niko_MPC_satellitesBlocking_PopulateOptions,,,,"80:niko_MPC_attackDefenseSatellites:Move in to engage the defense satellites",
niko_MPC_marketLeaveOption,niko_MPC_satellitesBlocking_PopulateOptions,"$hasMarket
!$market.isPlanetConditionMarketOnly","SetTooltip marketLeave $marketLeaveTooltip
SetShortcut marketLeave ""ESCAPE""",,"100:marketLeave:Leave",
niko_MPC_surveyLeaveOption,niko_MPC_satellitesBlocking_PopulateOptions,"$market.isPlanetConditionMarketOnly","SetShortcut surveyLeave ""ESCAPE""",,"100:surveyLeave:Leave",
niko_MPC_phaseThroughOption,niko_MPC_satellitesBlocking_PopulateOptions,,"FireBest niko_MPC_modifyPhaseThroughOption

SetTooltip niko_MPC_phaseThroughSatellites ""The effectiveness of the method scales with the percentage of phase ships in your fleet.\n\nUnusable at or below 30%, 3 story points above 30%, 2 story points above 50%,  1 story point above 75%, free above 95%.""
SetTooltipHighlightColors niko_MPC_phaseThroughSatellites textEnemyColor storyOptionColor hColor hColor hColor textFriendColor
SetTooltipHighlights niko_MPC_phaseThroughSatellites ""Unusable at or below 30%"", ",,"110:niko_MPC_phaseThroughSatellitesOption:Use your phase ships to distract the satellites long enough for your fleet to approach",
"#END Populating Options",,,,,,
,,,,,,
# Intro Text,,,,,,
niko_MPC_genericSatelliteBlockText,niko_MPC_satellitesBlockingText,,,"Before you can even enter high orbit of $entityName, your $shipOrFleet is suddenly lit up by hundreds of thousands of targetting lasers. Your sensors officer reports that the array of defense satellites in orbit of $entityName are currently tracking your $shipOrFleet and will make further approach nearly impossible, unless a number are destroyed/disabled.",,
"#END Intro Text",,,,,,
,,,,,,
# Attacking Satellites,,,,,,
niko_MPC_attackDefenseSatellitesSelected,DialogOptionSelected,"$option == niko_MPC_attackDefenseSatellites","niko_MPC_prepareSatelliteEncounter
FireBest niko_MPC_defenseSatellitesPrepareAttack
FireBest niko_MPC_defenseSatellitesPrepareText",,,
,,,,,,
# Text,,,,,,
niko_MPC_defenseSatellitesPrepareGenericText,niko_MPC_defenseSatellitesPrepareText,,,"You give the order to prepare for an engagement with the defense satellites.",,
"#END Text",,,,,,
,,,,,,
# Battle End,,,,,,
,,,,,,
# Complete victory,,,,,,
niko_MPC_defenseSatellitesDefeatedContinue,niko_MPC_DefenseSatellitesDefeated,,"FireBest OpenInteractionDialog
FireBest niko_MPC_defenseSatellitesDefeatedText",,,"called in dialogUtils"
,,,,,,
# End Text,,,,,,
niko_MPC_genericDefenseSatelliteDefeatedText,niko_MPC_defenseSatellitesDefeatedText,,,"Your efforts have opened a brief hole in the satellite orbit, allowing a brief window to interact.",,
"#END End Text",,,,,,
"#END Complete victory",,,,,,
"#END Battle End",,,,,,
"#END Attacking Satellites",,,,,,
,,,,,,
# Alternate Options,,,,,,
,,,,,,
# Modify,,,,,,
niko_MPC_phaseThroughModBelowMin,niko_MPC_modifyPhaseThroughOption,"niko_MPC_phaseShipPercentCheck ""getPlayerFleet"" ""<="" 0.3 score:100","SetEnabled niko_MPC_phaseThroughSatellites false",,,
niko_MPC_phaseThroughModThreshOne,niko_MPC_modifyPhaseThroughOption,"niko_MPC_phaseShipPercentCheck ""getPlayerFleet"" "">"" 0.3 score:110","SetStoryOption niko_MPC_phaseThroughSatellites 3 niko_MPC_phaseThroughOptionThreshOne",,,
niko_MPC_phaseThroughModThreshTwo,niko_MPC_modifyPhaseThroughOption,"niko_MPC_phaseShipPercentCheck ""getPlayerFleet"" "">="" 0.5 score:100","SetStoryOption niko_MPC_phaseThroughSatellites 2 niko_MPC_phaseThroughOptionThreshTwo",,,
niko_MPC_phaseThroughModThreshThree,niko_MPC_modifyPhaseThroughOption,"niko_MPC_phaseShipPercentCheck ""getPlayerFleet"" "">="" 0.75 score:130","SetStoryOption niko_MPC_phaseThroughSatellites 1 niko_MPC_phaseThroughOptionThreshThree",,,
niko_MPC_phaseThroughModThreshFour,niko_MPC_modifyPhaseThroughOption,"niko_MPC_phaseShipPercentCheck ""getPlayerFleet"" "">="" 0.95 score:140","SetOptionText niko_MPC_phaseThroughSatellites ""Order the fleet to phase through the defensive matrix""",,,"its free!"
"#END Modify",,,,,,
,,,,,,
# Options,,,,,,
niko_MPC_phaseThroughSatellitesOption,DialogOptionSelected,"$option == niko_MPC_phaseThroughSatellitesOption","$niko_MPC_bypassedSatellites = true 0
FireBest niko_MPC_phaseThroughSatellitesOptionText","You order your fleet up to the limit of the satellite defense grid and ready their engines to burn hard, putting all hands on alert.",,
niko_MPC_phaseThroughSatellitesDistract,niko_MPC_phaseThroughSatellitesOptionText,"niko_MPC_phaseShipPercentCheck ""getPlayerFleet"" ""<"" 0.95",,"You spend a few minutes with your ops chief, pouring over your plan. Within twenty minutes, the two of you, with help from your other bridge officers and input from fleet pilots, have a relatively ""good"" plan - at least, thats what your op chief calls it. As is typical for any paperwork written by this particular officer, it's filled with jargon, indecipherable annotations, and countless moving pieces. Still, they gruffly insist to just ""leave them be"", as it's perfectly understandable by them.","10:niko_MPC_phaseThroughSatellitesDistractTwo:Continue",
niko_MPC_phaseThroughSatellitesTotal,niko_MPC_phaseThroughSatellitesOptionText,"niko_MPC_phaseShipPercentCheck ""getPlayerFleet"" "">="" 0.95","FireBest OpenInteractionDialog","You open a fleetwide comms channel and issue the command that oh-so-commonly haunts phase fleet dreams: ""All hands, standby for deep dive"". On your mark, your entire fleet enters phase, and burns hard into the defensive sphere projected by the satellites.  

They fire fruitlessly into phase ghosts, ballistics and plasma passing through them like gas. Within mere minutes, your sensor officer gives the all-okay signal, to which all ships respond by eagerly exiting phase space. You forward the inevitable reports of phase sickness to the head physician, and resume on your course.",,
niko_MPC_phaseThroughSatellitesDistractTwo,DialogOptionSelected,"$option == niko_MPC_phaseThroughSatellitesDistract",,"Ten minutes later, you receive a comms-request from your ops chief. As soon as you pick it up, you hear a gruff ""Ready"" - a bluntness and straightforwardness you'd only expect from your ops chief. You answer with the same bluntness: ""Execute.""

Your ops chief begins barking orders into his headset, and all the officers in your bridge scramble to their positions. In an instant, your phase ships begin to take defensive formations around your material ships, your flagship lurching as it moves to join.","10:niko_MPC_phaseThroughSatellitesDistractBegin:Continue",
niko_MPC_phaseThroughSatellitesDistractProtected,DialogOptionSelected,"$option == niko_MPC_phaseThroughSatellitesDistractBegin
!niko_MPC_flagshipIsPhase",,"The autopilot, reprogrammed by your ops chief, takes your ship behind a few phase ships designated to protecting it. 

Your ops chief ceases barking coordinates and adjustments into his mic. They open a comms link to the fleet and issue one order, ""Hold"". Then a moment later, ""Execute"".

Your ship lurches as its engines are pushed to their limit. The ships in front of you phase and begin evasive maneuvers, firing off the occasional flare from jury-rigged flare launchers that quickly fizzle off into realspace. The ballistics, plasma, and missiles are all masterfully redirected away from your flagship and either into the PD net of a nearby protectorate, or off into space.","10:niko_MPC_phaseThroughSatellitesDistractProtectedTwo:Continue",
niko_MPC_phaseThroughSatellitesDistractProtectedTwo,DialogOptionSelected,"$option == niko_MPC_phaseThroughSatellitesDistractProtectedTwo","FireBest niko_MPC_phaseThroughSatellitesDistractEnd","A few minutes of spectacular fireworks later, your op chief barks into their mic the command ""End operation"". Your escorts immediately unphase, and all ships re-enter normal formation.",,
niko_MPC_phaseThroughSatellitesDistractProtector,DialogOptionSelected,"$option == niko_MPC_phaseThroughSatellitesDistractBegin
niko_MPC_flagshipIsPhase",,"The autopilot, reprogrammed by your ops chief, takes your ship in front of one of your realspace ships and into an array of phase ships designated to its protection. Your headpiece dings as it begins transmitting direct orders from the ops chief, giving your ship the rather creative designation of ""Flagship"". A moment later, your console dings as it helpfully informs you that manual control has been restored, and its up to you now.

Your ops chief ceases barking coordinates and adjustments into his mic. They open a comms link to the fleet and issue one order, ""Hold"". Then a moment later, ""Execute"".","10:niko_MPC_phaseThroughSatellitesDistractProtectorTwo:Begin evasive maneuvers",
niko_MPC_phaseThroughSatellitesDistractProtectorTwo,DialogOptionSelected,"$option == niko_MPC_phaseThroughSatellitesDistractProtectorTwo",,"You immediately dive into phase with the rest of your group, and firing off jury-rigged flares on the hull of your flagship. The satellites are immediately attracted to these flares, and by extension, you, firing barrage after barrage into your phase ghost. You, and your ops chief, both take care to ensure you don't cause the firing line to intersect with any protectorates.

You constanly re-adjust, responding to command after command from your ops chief, your wingmates, and the protectorate, painting wide arcs in space with your engine contrail.

","10:niko_MPC_phaseThroughSatellitesDistractProtectorThree:Continue",
niko_MPC_phaseThroughSatellitesDistractProtectorThree,DialogOptionSelected,"$option == niko_MPC_phaseThroughSatellitesDistractProtectorThree","FireBest niko_MPC_phaseThroughSatellitesDistractEnd","A few minutes of spectacular fireworks later, your op chief barks into their mic the command ""End operation"", and your wing immediately unphases. You receive the order to re-enter the fleet's formation, to which you give to the autopilot.",,
niko_MPC_phaseThroughSatellitesDistractEnd,niko_MPC_phaseThroughSatellitesDistractEnd,,"FireBest OpenInteractionDialog","You request a damage report and take a few moments to peruse it, but to your surprise, most damage is in the form of overstressed phase coils and superficial armor damage.

Satisfied with your work, you issue the command to continue with your journey.",,
"#END Options",,,,,,
"#END Alternate Options",,,,,,
"#END Satellites Blocking Access",,,,,,
"#END Satellite Interactions",,,,,,

